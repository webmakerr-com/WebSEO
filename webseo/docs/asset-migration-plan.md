# Asset migration notes

## Inventory overview
- **Pro add-on admin assets (`pro-addon/assets/`)**: CSS bundles (`seopress-pro.css`, dashboard skins, `datatables.min.css`), numerous JS utilities (AI, PageSpeed, GA/Matomo dashboards, Bot tabs, license, htaccess, CSV import, video sitemap, chatbot) and supporting vendor files (`chart.bundle.min.js`, `datatables.min.js`). Image set includes feature icons (schemas, AI, page speed, etc.) and partner logos (OpenAI/DeepSeek).【F:pro-addon-manifest.json†L3-L109】
- **Pro add-on block/editor builds (`pro-addon/public/editor/`)**: Gutenberg blocks for breadcrumbs, how-to (and steps), local business, table of contents (with dedicated `toc-block` view script), plus a post watcher module. Each block ships compiled JS/CSS and `index.asset.php` dependency maps; no equivalents exist in the free plugin today.【F:pro-addon-manifest.json†L1569-L1704】
- **Free plugin editor outputs (`public/editor/`)**: Existing compiled assets for FAQ (two versions), sitemap block, primary category selector, and pre-publish checklist with corresponding dependency metadata (`*.asset.php`). Handles currently enqueued as `seopress-pre-publish-checklist` and `webseo-pre-publish-checklist` from metabox contexts.【F:public/editor/pre-publish-checklist/index.asset.php†L1-L1】【F:src/Actions/Admin/ModuleMetabox.php†L78-L96】【F:inc/admin/metaboxes/admin-metaboxes.php†L168-L205】

## Current handles and dependencies to preserve
- **Admin (Pro)**: `seopress-pro-admin`, `seopress-ga-dashboard-widget`, `seopress-pro-ai` (+ localized `seopressAjaxAIMetaSEO`), `seopress-page-speed` (localized page-speed endpoints), GA/Matomo dashboards (`seopress-pro-ga`, `seopress-pro-ga-embed`, `seopress-pro-matomo` with AJAX nonces), Bot tooling (`seopress-datatable`, `seopress-bot-admin-tabs` with `seopressAjaxBot`), license/reset flows (`seopress-license` + `seopressAjaxResetLicense`), htaccess saver, video sitemap regenerate (`seopressAjaxVdeoRegenerate`), chatbot bootstrap, and media/upload helpers. Dependencies include jQuery, jQuery UI components, and localized admin-ajax URLs.【F:pro-addon/seopress-pro.php†L418-L689】
- **Metabox/Editor (Free)**: `seopress-pre-publish-checklist` and `webseo-pre-publish-checklist` are used in block editor contexts when custom fields are supported; `webseo-primary-category` (Gutenberg) and `webseo-primary-category-classic` (classic) rely on `public/editor/primary-category-select/index.js` or JS in `assets/js/webseo-primary-category-classic.js`. Ensure future builds keep these handles to avoid regression in metabox integrations.【F:src/Actions/Admin/ModuleMetabox.php†L78-L101】【F:inc/admin/metaboxes/admin-metaboxes.php†L180-L210】

## Proposed target locations
- **Admin CSS/JS**: Move Pro admin assets into the main plugin’s `assets/css` and `assets/js` under a `pro/` prefix (e.g., `assets/js/pro/seopress-pro-ai.min.js`) to avoid clashing with existing free handles; update `plugins_url`/`WEBSEO_ASSETS_DIR` references accordingly while retaining script handles.
- **Images**: Relocate `pro-addon/assets/img` SVGs into `assets/img/pro/` and adjust any PHP/JS references that expect the old relative path.
- **Editor blocks**: Place Gutenberg builds from `pro-addon/public/editor` inside `public/editor/pro/` (mirroring free block structure). Preserve `*.asset.php` files beside their JS/CSS so WordPress dependency resolution continues to work.
- **Shared vendor files**: Keep `chart.bundle.min.js` and `datatables.min.{js,css}` alongside the scripts that enqueue them (likely `assets/js/pro/` and `assets/css/pro/`) and update enqueue paths, since handles like `seopress-pro-ga-embed` and `seopress-datatable` are already in use.【F:pro-addon/seopress-pro.php†L471-L616】

## Notes for enqueue/bundler adjustments
- Update any `plugins_url()` or `WEBSEO_URL_PUBLIC`/`WEBSEO_ASSETS_DIR` calls to point to the new paths while keeping existing handles and localization object names intact to avoid breaking AJAX consumers.
- Ensure `SCRIPT_DEBUG` handling remains (minified vs non-minified) when moving files; keep both `.js` and `.min.js` pairs in the new hierarchy.
- For block builds, align the bundler output (likely `@wordpress/scripts`) to emit into `public/editor/pro/**` with matching `index.asset.php` content, and ensure block registration references `file:` paths relative to the new locations.
